<app-card caption="Cuentas por pagar">
    <main>
        <div class="row alert alert-secondary" *ngIf="operations">
            <div class="col-sm-12 text-ultra-small">
                <div class="row border-bottom-2 style-header-table">
                    <div class="col-sm-12">
                        Compras en efectivo
                    </div>
                </div>
                <div class="row border-bottom-2 bg-gray text-ultra-small">
                    <div class="col-sm-2">
                        Acciones
                    </div>
                    <div class="col-sm-3">
                        Factura
                    </div>
                    <div class="col-sm-3">
                        Fecha
                    </div>
                    <div class="col-sm-4">
                        Valor
                    </div>
                </div>
                <div class="row border-bottom-1 text-big" *ngFor="let opr of operations.efecty">
                    <div class="col-sm-2 text-small">
                        <a href="#" (click)="selectOperation(opr.pk_id_operation)" data-toggle="modal" data-target="#operationViewModal" class="badge badge-light">
                            <fa-icon [icon]="faEye" class="text-warning mb-2 mr-1" title="Ver registro"></fa-icon>Ver
                        </a>
                    </div>
                    <div class="col-sm-3 text-small">
                        {{ opr.number_invoice }}
                    </div>
                    <div class="col-sm-3 text-small">
                        {{ opr.date_operation }}
                    </div>
                    <div class="col-sm-4 text-small">
                        {{ opr.total_operation | number }}
                    </div>
                </div>
            </div>
        </div>

        <div class="row  alert alert-danger" *ngIf="operations">
            <div class="col-sm-12 text-ultra-small">
                <div class="row border-bottom-2 style-header-table">
                    <div class="col-sm-12">
                        Pagos a proveedores
                    </div>
                </div>
                <div class="row border-bottom-2 bg-gray text-ultra-small">
                    <div class="col-sm-2">
                        Acciones
                    </div>
                    <div class="col-sm-3">
                        Proveedor
                    </div>
                    <div class="col-sm-3">
                        Factura
                    </div>
                    <div class="col-sm-2">
                        Fecha de pago
                    </div>
                    <div class="col-sm-2">
                        Valor de pago
                    </div>
                </div>
                <div class="row border-bottom-1 text-big" *ngFor="let opr of operations.pay_purchase">
                    <div class="col-sm-2">
                        <div class="btn-group text-small">
                            <a href="#" (click)="selectOperation(opr.pk_id_operation)" data-toggle="modal" data-target="#operationViewModal" class="badge badge-light">
                                <fa-icon [icon]="faEye" class="text-warning mb-2 mr-1" title="Ver registro"></fa-icon>Ver
                            </a>                            
                        </div>
                    </div>
                    <div class="col-sm-3 text-small">
                        {{ opr.external_reference.split(":")[2] }}
                    </div>
                    <div class="col-sm-3 text-small">
                        {{ opr.number_invoice }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.date_payment }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.payment | number}}
                    </div>
                </div>
            </div>

            <!-- Gastos-->
            <div class="col-sm-12 text-ultra-small">
                <div class="row border-bottom-2 style-header-table">
                    <div class="col-sm-12">
                        Gastos
                    </div>
                </div>
                <div class="row border-bottom-2 bg-gray text-ultra-small">
                    <div class="col-sm-3">
                        Tipo de gasto
                    </div>
                    <div class="col-sm-2">
                        Fecha de gasto
                    </div>
                    <div class="col-sm-5">
                        Descripción
                    </div>
                    <div class="col-sm-2">
                        Valor
                    </div>
                </div>
                <div class="row border-bottom-1 text-big" *ngFor="let expense of operations.expenses">
                    <div class="col-sm-3 text-small">
                        {{ expense.type_expense }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ expense.date_expense }}
                    </div>
                    <div class="col-sm-5 text-small">
                        {{ expense.description }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ expense.value | number}}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row alert alert-success" *ngIf="pendingReceive">
            <div class="col-sm-12 text-ultra-small">
                <div class="row border-bottom-2 style-header-table">
                    <div class="col-sm-12">
                        Consolidado por proveedor
                    </div>
                </div>
                <div class="row border-bottom-2 bg-gray text-ultra-small">
                    <div class="col-sm-4">
                        Proveedor
                    </div>
                    <div class="col-sm-4">
                        Valor total de factura
                    </div>
                    <div class="col-sm-4">
                        Saldo de factura
                    </div>
                </div>
                <div class="row border-bottom-1 text-big" *ngFor="let opr of pendingReceive.operations">
                    <div class="col-sm-4 text-small">
                        {{ opr.external_reference.split(":")[2] }}  
                    </div>
                    <div class="col-sm-4 text-small">
                        {{ opr.total_operation | number }}
                    </div>
                    <div class="col-sm-4 text-small">
                        {{ opr.total_operation - opr.total_pays | number }}
                    </div>
                </div>
            </div>
            
            <div class="col-sm-12 text-ultra-small" *ngIf="operations">
                <div class="row border-bottom-2 style-header-table">
                    <div class="col-sm-12">
                        Compras a crédito
                    </div>
                </div>
                <div class="row border-bottom-2 bg-gray text-ultra-small">
                    <div class="col-sm-2">
                        Acciones
                    </div>
                    <div class="col-sm-2">
                        Proveedor
                    </div>
                    <div class="col-sm-2">
                        Factura
                    </div>
                    <div class="col-sm-2">
                        Fecha
                    </div>
                    <div class="col-sm-2">
                        Valor
                    </div>
                    <div class="col-sm-2">
                        Saldo
                    </div>
                </div>
                <div class="row border-bottom-1 text-big" *ngFor="let opr of operations.credit">
                    <div class="col-sm-2">
                        <div class="btn-group text-small">
                            <a href="#" (click)="selectOperation(opr.pk_id_operation)" data-toggle="modal" data-target="#operationViewModal" class="badge badge-light">
                                <fa-icon [icon]="faEye" class="text-warning mb-2 mr-1" title="Ver registro"></fa-icon>Ver
                            </a>
                            <a *ngIf="(opr.total_operation - opr.total_pays) > 0" href="#" (click)="selectOperation(opr.pk_id_operation)" data-toggle="modal" data-target="#paymentModal" class="badge badge-light">
                                <fa-icon [icon]="faMoneyBill" class="text-success mb-2 mr-1" title="Registro de pago"></fa-icon>Pagar
                            </a>                            
                        </div>
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.external_reference.split(":")[2] }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.number_invoice }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.date_operation }}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.total_operation | number}}
                    </div>
                    <div class="col-sm-2 text-small">
                        {{ opr.total_operation - opr.total_pays | number}}
                    </div>
                </div>
            </div>
        </div>

        <app-model-payment
            [pk_id_operation]="operation.pk_id_operation"
            [value_payment]="operation.total_operation - operation.total_pays"
            (create)="onCreatePayment($event)"
        >
        </app-model-payment>

        <app-model-view-operation
            [enterprise]="enterprise"
            [operation]="operation"
        >
        </app-model-view-operation>

    </main>
</app-card>