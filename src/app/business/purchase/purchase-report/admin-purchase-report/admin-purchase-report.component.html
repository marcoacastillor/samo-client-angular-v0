<app-card caption="Compras, consolidado por fechas">
    <main>  
        <div class="row">
            <div class="col-sm-12 alert alert-info" role="alert">
                Reporte que muestra datos consolidados de compras por rango de fechas. Por defecto se muestra la información de <strong>{{ consolidate_day * 2 }}</strong> días.
            </div>
        </div>
        <form [formGroup]="reportForm">
            <div class="row">
                <div class="col-sm-4">
                    <label for="from_date">Fecha inicial</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="btn text-small btn-sm btn-outline-primary" [owlDateTimeTrigger]="from_date"><fa-icon [icon]="faCalendar" class="text-primary"></fa-icon></span>
                        </div>
                        <input type="text" class="form-control text-small" placeholder="Desde" formControlName="from_date" [owlDateTime]="from_date">
                        <owl-date-time [pickerType]="'calendar'" #from_date></owl-date-time>
                        <div class="col-sm-12">
                            <small class="form-text alert-primary">
                                Fecha inicial rango de compra.
                            </small>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label for="to_date">Fecha final</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="btn text-small btn-sm btn-outline-primary" [owlDateTimeTrigger]="to_date"><fa-icon [icon]="faCalendar" class="text-primary"></fa-icon></span>
                        </div>
                        <input type="text" class="form-control text-small" placeholder="Hasta" formControlName="to_date" [owlDateTime]="to_date">
                        <owl-date-time [pickerType]="'calendar'" #to_date></owl-date-time>
                        <div class="col-sm-12">
                            <small class="form-text alert-primary">
                                Fecha final de rango de compra.
                            </small>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 row align-items-center">            
                    <button type="submit" class="btn btn-outline-primary btn-sm mb-2 mr-1" (click)="loadDataFromForm()">Buscar</button>
                </div>
            </div>
        </form>
        <div class="row">
            <div class="col-sm-4">
                <app-consolidated
                    [consolidate]="consolidateData.consolidate"
                    [totales]="consolidateData.totales"
                    [values]="consolidateData.values"
                ></app-consolidated>
            </div>
            <div class="col-sm-8">
                <app-pending-receive
                    [pendingReceive]="consolidateData.clients_pending"
                    [operations]="consolidateData.operations"
                    [enterprise]="enterprise"
                    [operation]="operation"
                    (onGetOperation)="onViewOperation($event)"
                    (create)="onCreatePayment($event)"
                ></app-pending-receive>
            </div>
        </div>
    </main>
</app-card>